<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polyoxometalate Explorer</title>

  <!-- Global layout/utility styles (you will style these in assets/styles.css) -->
  <link rel="stylesheet" href="assets/styles.css">

  <!-- Search logic + UI helpers -->
  <script defer src="assets/search.js"></script>
  <!-- Popâ€‘up/Netlify request helper (see brief at bottom of file) -->
  <script defer src="assets/details.js"></script>
</head>
<body>
  <!-- â€‘â€‘â€‘ Header & intro copy â€‘â€‘â€‘ -->
  <header class="container mx-auto py-6 text-center">
    <h1 id="pageTitle" class="text-4xl font-bold">PolyoxometalateÂ Explorer</h1>
  </header>

  <!-- ðŸ”¹ horizontal rule under headline -->
  <div class="horizontal-divider"></div>

  <main class="container mx-auto flex flex-col gap-6 px-4 lg:gap-8">
    <!-- Intro & howâ€‘to text sit sideâ€‘byâ€‘side on large screens, stacked on mobile -->
    <section class="flex-1 space-y-6" aria-label="About">
      <p id="introText" class="intro editable-text" data-edit="intro">
        <!-- Short introduction â€“ replace with your own copy. -->
        Welcome! Use this page to explore curated Polyoxometalate (POM) structures.
      </p>

      <!-- Horizontal divider between intro & howâ€‘to on mobile -->
      <div class="horizontal-divider lg:hidden"></div>

      <p id="howToUseText" class="how-to editable-text" data-edit="howto">
        <!-- Instructions placeholder â€“ replace with your own guide. -->
        Fill in any of the fields below to filter the dataset; leave fields blank to see everything.
      </p>
    </section>

    
    <!-- Search form / filters -->
    <section class="flex-1" aria-label="Search form">
      <form id="searchForm" class="space-y-4" autocomplete="off">
        <fieldset class="space-y-2">
          <legend class="sr-only">Search Polyoxometalates</legend>

          <label for="searchId">POMâ€‘ID</label>
          <input type="text" id="searchId" name="pomId" placeholder="e.g.Â POM_XIFU">

          <label for="searchFormula">Formula</label>
          <input type="text" id="searchFormula" name="formula" placeholder="[VO3]âˆ’">

          <label for="searchElements">Elements</label>
          <input type="text" id="searchElements" name="elements" placeholder="V,O">

          <label for="searchMass">MolecularÂ Mass</label>
          <input type="number" step="any" id="searchMass" name="mass" placeholder="98.939">

          <label for="searchCharge">Charge</label>
          <input type="number" step="any" id="searchCharge" name="charge" placeholder="â€‘3">

          <label for="searchLabel">Label</label>
          <select id="searchLabel" name="label">
            <option value="">Any</option>
            <!-- JS will insert unique label options here at runtime -->
          </select>

          <label for="searchMaterial">POMÂ MaterialÂ Formula</label>
          <input type="text" id="searchMaterial" name="material" placeholder="Ag3(C2)(VO3)">

          <label for="searchDoi">DOI</label>
          <input type="text" id="searchDoi" name="doi" placeholder="10.1021/acs.inorgchem.9b00264">
        </fieldset>

        <div class="flex gap-4 pt-2">
          <button type="submit" class="btn-primary">Search</button>
          <button type="reset" id="resetButton" class="btn-secondary">Reset</button>
        </div>
      </form>
    </section>
  </main>

  <!-- ðŸ”¹ horizontal rule between filters and results -->
  <div class="horizontal-divider"></div>

  <!-- Secondary vertical divider separates filters from results on wide viewports -->
  <div class="vertical-divider wide" aria-hidden="true"></div>

  <!-- Results table -->
  <section class="container mx-auto px-4 py-8" aria-label="Search results">
    <div class="table-scroll">
      <table id="resultsTable" class="w-full text-sm" data-link-key="pomId">
        <thead>
          <tr>
            <th scope="col">POMâ€‘ID</th>
            <th scope="col">Formula</th>
            <th scope="col">Elements</th>
            <th scope="col">MolecularÂ Mass</th>
            <th scope="col">Charge</th>
            <th scope="col">Label</th>
            <th scope="col">POMÂ MaterialÂ Formula</th>
            <th scope="col">DOI</th>
          </tr>
        </thead>
        <tbody>
          <!-- JS populates rows here. If no filters are applied, everything from data/Curated_POMs.json appears. -->
        </tbody>
      </table>
    </div>
  </section>

  <!-- Hidden popâ€‘up for Netlify/ChatGPT detail fetches -->
  <dialog id="detailsPopup" class="max-w-prose rounded-lg p-4 shadow-xl">
    <header class="flex items-center justify-between mb-2">
      <h2 id="detailsTitle" class="font-semibold">POM Details</h2>
      <button id="closePopup" class="btn-close" aria-label="Close details">&times;</button>
    </header>
    <pre id="detailsContent" class="whitespace-pre-wrap text-sm"></pre>
  </dialog>

  <!--
    #######################################################################
      Implementation Notes (delete when finished styling / scripting)
    #######################################################################
      â€¢ data/Curated_POMs.json  â€“> fetch + filter in assets/search.js.
      â€¢ <table data-link-key="pomId"> â€“> whichever column is used as the clickable
        link for Netlify/ChatGPT lookâ€‘ups. Change this single attribute if you
        later decide to swap to another field.
      â€¢ assets/details.js should:
          1. intercept clicks on .detailsâ€‘link anchors inside results rows,
          2. POST the full JSON payload for that item to your Netlify endpoint
             (placeholder: https://YOURâ€‘NETLIFYâ€‘FUNCTION.netlify.app/),
          3. parse the response, inject it into #detailsContent, and open <dialog>.
  -->
</body>
</html>
